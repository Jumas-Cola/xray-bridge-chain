# xray-bridge-chain

Данный репозиторий предоставляет готовые конфигурации и вспомогательные скрипты для быстрой настройки **"Мостовой цепи" (Bridge Chain)** с использованием прокси-сервера **Xray**.

```mermaid
graph TD;
    A(Client) -->|xray| B[Bridge Server];
    B[Bridge Server] -->|xray| C[Upstream Server];
    C[Upstream Server] --> D(Internet);
```

Основная цель конфигурации — обеспечить эффективную маскировку прокси-трафика путем использования популярных российских веб-ресурсов в качестве внешних адресов (обфускации). Это позволяет скрыть факт использования VPN/прокси-сервиса, имитируя обычный HTTPS-трафик к легитимным доменам.

## Структура и компоненты

* `bridge/`: Конфигурационные файлы, предназначенные для установки и настройки **Bridge-сервера** (узел, принимающий трафик от клиента).
* `upstream/`: Конфигурационные файлы для **Upstream-сервера** (узел, который направляет трафик в Интернет).
* `generate-keys.sh`: Скрипт для автоматизации генерации необходимых ключей и сертификатов (например, для настройки TLS).


## Запуск

1. Запустить скрипт generate-keys.sh и сохранить згенерированные значения и ссылки для подключения.
2. Вставить сохранённые значения в соответствующие места с конфигах.
3. Зайти на bridge и upstream серверы и запустить сервисы `docker compose up -d`.
4. Подключиться по сгенерированным на шаге 1 ссылкам.

## Рекомендуемые домены для маскировки

### Для Bridge сервера (dest + serverNames):

- www.sberbank.ru - Сбербанк
- www.vk.com - ВКонтакте
- yandex.ru - Яндекс
- mail.ru - Mail.ru
- www.tinkoff.ru - Тинькофф
- www.ozon.ru - Озон
- www.wildberries.ru - Wildberries

### Для Upstream сервера:

- gosuslugi.ru - Госуслуги
- www.mos.ru - Мос.ру
- www.nalog.gov.ru - ФНС
- www.pfr.gov.ru - ПФР


### Важные замечания:

- Выбор домена для dest: Должен поддерживать TLS 1.3 и HTTP/2. Проверьте:

```bash
curl -I --tlsv1.3 --http2 https://www.sberbank.ru
```

- serverNames: Может содержать несколько доменов, клиент выбирает один случайно.
